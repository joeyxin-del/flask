<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>情绪危机可视化</title>
    <script type="text/javascript" src="../static/js/jquery.js"></script>
    <link rel="stylesheet" href="../static/css/comon0.css">
</head>
<script type="text/javascript" src="../static/js/loading.js"></script>
<script type="text/javascript" src="../static/js/echarts.min.js"></script>
<!--<script type="text/javascript" src='../static/js/echarts.simple.js'></script>-->
<script type="text/javascript" src="../static/js/echarts-wordcloud.js"></script>
<script type="text/javascript" src="../static/js/china.js"></script>


<body>

<!--这是一个动态的粒子效果图，设置了透明度为0.2
<div class="canvas" style="opacity: 0.9">
    <iframe frameborder="0" src="../static/js/index.html" style="width: 100%; height: 100%"></iframe>
</div>
-->
<!--这是一个在正式页面加载进来之前显示的加载小动画，文字可以修改-->
<div class="loading">
    <div class="loadbox"><img src="../static/picture/loading.gif"> 我正在加载中...</div>
</div>
<!--时间显示-->
<div class="head">

    <h1>{{title}}</h1>

    <div class="weather">
        <!--<img src="../static/picture/weather.png"><span>我是天气</span>-->
        <span id="showTime"></span>
    </div>

<!--    尝试放到js里面-->
    <script type="text/javascript" src="../static/js/showtime.js"></script>

</div>

<div class="mainbox">
    <ul class="clearfix">

        <!--        第1栏 -->
        <li>
            <div class="boxall" style="height: 3.2rem" id="chart1">
                <div class="alltitle">{{form.echart1.title}}</div>
                <div class="allnav" id="echart1"></div>
                <div class="boxfoot"></div>
            </div>
            <div class="map" style="height:0rem;width:0rem" id="chart8">

                <div class="map4" style="z-index:0" id="map_1"></div>
            </div>
            <div class="boxall" style="height: 3.2rem" id="chart2">
                <div class="alltitle">{{form.echart2.title}}</div>
                <div class="allnav" id="echart2"></div>
                <div class="boxfoot"></div>
            </div>
            <div class="boxall" style="height: 3.2rem" id="chart3">
                <div style="height:100%; width: 100%;">
                    <div class="sy" id="fb1"></div>
                    <div class="sy" id="fb2"></div>
                    <!--<div class="sy" id="fb3"></div>-->
                </div>
                <div class="boxfoot">

                </div>
            </div>
        </li>

        <!--        第2栏 -->
        <li>
            <div class="bar">
                <!--                放数字显示区域 -->
                <div class="barbox">
                    <ul class="clearfix">
                        <li class="pulll_left counter">{{form.counter.value}}</li>
                        <li class="pulll_left counter">{{form.counter2.value}}</li>
                    </ul>
                </div>
                <!--                放文字显示区域 -->
                <div class="barbox2">
                    <ul class="clearfix">
                        <li class="pulll_left">{{form.counter.name}}</li>
                        <li class="pulll_left">{{form.counter2.name}}</li>
                    </ul>
                </div>
            </div>
            <!--文本轮播-->
            <!--需要修改margin padding-->
            <div class="fliptitle">紧急文本信息</div>
            <div class="flip" id="flipbox">
                <div class="inner1">
                    <!--轮播图-->
                    <ul class="flip_ul">
                        <li><a href="#"><div class="flip_div">

                            <div class="grid_box">
                                <div class="section1">
                                    <h1>自杀风险9级</h1>
                                </div>
                                <div class="section2">
                                    <p class="Metadata">今天 03:46 广东</p>
                                </div>
                                <div class="section3">
                                    <p class="Metadata">https://weibo.com/1813447442</p>
                                </div>
                                <div class="section4">
                                    <h2>情绪危机文本：</h2>
                                    <p>我以前从来不考虑服毒，我很怕痛，烧炭上吊跳楼……但是我现在我却想用吃药的事，我想感受一下当时的你的痛苦。</p>
                                </div>
                                <div class="section5">
                                    <h2>模型分析结果:</h2>
                                    <p>经分析，该用户可能具有<span>哀伤与丧失</span>,<span>缩小</span>的主要危机情绪特征。</p>
                                    <p><span>哀伤与丧失：</span>丧失是指失去亲近的人，可能是死亡或者是离开；失去未来的各种可能性,以及身体的损害等。生活中可能存在的丧失包括离婚、丧失配偶、丧失亲人、失去友谊等。<p>
                                    <p><span>缩小：</span>把它们看得微不足道,把事实不成比例地将它们的重要性缩小到滑稽可笑的地步</p>
                                    <p><span>特别提醒：</span>该微博用户曾经有大量发言(留言>1000)之嫌疑。</p>
                                </div>
                            </div>

                        </div></a></li>
                        <li><a href="#"><div class="flip_div">

                            <div class="grid_box">
                                <div class="section1">
                                    <h1>新冠疫情相关信息</h1>
                                </div>
                                <div class="section2">
                                    <p class="Metadata">今天 00:15 武汉</p>
                                </div>
                                <div class="section3">
                                    <p class="Metadata">https://weibo.com/394247442</p>
                                </div>
                                <div class="section4">
                                    <h2>情绪危机文本：</h2>
                                    <p>断联的前任加我了，因为疫情，你看他，虽然每次都知道叮嘱我注意安全，可是他不会回来，他和别人在一起了，可能喜欢和合适不一样吧，可能他只是可怜我吧</p>
                                </div>
                                <div class="section5">
                                    <h2>模型分析结果:</h2>
                                    <p>经分析，该用户可能具有<span>哀伤与丧失，角色演变，角色冲突</span>的主要危机情绪特征。</p>
                                    <p><span>哀伤与丧失：</span>丧失是指失去亲近的人，可能是死亡或者是离开；失去未来的各种可能性,以及身体的损害等。生活中可能存在的丧失包括离婚、丧失配偶、丧失亲人、失去友谊等。<p>
                                    <p><span>角色演变：</span>通常发生于个体横越生活发展阶段时，通常伴随着这样的生活事件，如入学、结婚、新工作、生子等。</p>
                                    <p><span>角色冲突：</span>角色冲突是指当一个人扮演一个角色或同时扮演几个不同的角色时，由于不能胜任，造成不合适宜而发生的矛盾和冲突。</p>
                                </div>
                            </div>

                        </div></a></li>
                        <li><a href="#"><div class="flip_div">

                            <div class="grid_box">
                                <div class="section1">
                                    <h1>自杀风险5级</h1>
                                </div>
                                <div class="section2">
                                    <p class="Metadata">今天 20:22 宁夏 银川</p>
                                </div>
                                <div class="section3">
                                    <p class="Metadata">https://weibo.com/1592332742</p>
                                </div>
                                <div class="section4">
                                    <h2>情绪危机文本：</h2>
                                    <p>我好累每个知识点都学不懂 喜欢的人也没有留住处处是遗憾 说出来想自杀也会被骂死 那天经过一个卖农药的店铺我好想进去买一瓶结束啊 什么时候才能成为别人那样</p>
                                </div>
                                <div class="section5">
                                    <h2>模型分析结果:</h2>
                                    <p>经分析，该用户可能具有<span>罪责归己，以偏概全</span>的主要危机情绪特征。</p>
                                    <p><span>罪责归己：</span>即使某些外界消极事件你根本不需要负责，但你却认为自己是罪魁祸首。当你把一个自己无法完全控制的事件产生的责任后果全揽到自己头上时,你就犯了罪责归己的错误。罪责归己会引发内疚、羞愧和自卑感。<p>
                                    <p><span>以偏概全：</span>将一件负面事件--例如恋爱被甩或遭遇事业逆境--看成是永久性的失败，每每想起，就会用“总是”或“从不”之类的偏激字眼。</p>

                                </div>
                            </div>

                        </div></a></li>
                        <li><a href="#"><div class="flip_div">

                            <div class="grid_box">
                                <div class="section1">
                                    <h1>生活困难相关信息</h1>
                                </div>
                                <div class="section2">
                                    <p class="Metadata">今天 6:23 湖南 岳阳</p>
                                </div>
                                <div class="section3">
                                    <p class="Metadata">https://weibo.com/1813447442</p>
                                </div>
                                <div class="section4">
                                    <h2>情绪危机文本：</h2>
                                    <p>失业好几个月了吧，刚开始志气满满的心情渐渐被时间消磨殆尽了，每天都是浑浑噩噩的，但是又不能表现出来，妈妈一边叹气一边安慰我不要着急，越发焦虑不安</p>
                                </div>
                                <div class="section5">
                                    <h2>模型分析结果:</h2>
                                    <p>经分析，该用户可能具有<span>心理过滤，否定正面思考</span>的主要危机情绪特征。</p>
                                    <p><span>心理过滤：</span>单单挑出一个负面细节专注地反复回味,然后就觉得整个世界都是阴暗的,就如同一滴墨染黑了一杯水。情绪抑郁时，就好像戴上了一副有色眼镜，镜片会过滤掉任何正面的内容，只留下负面内容进入脑海。<p>
                                    <p><span>否定正面思考：</span>它使一些抑郁患者固执地把中性甚至正面的体验转换为负面体验。有这种认知错误的人不是看不到正面体验，他们只是把他们转换成了噩梦般的负面体验。</p>
                                    <p><span>特别提醒：</span>应对用户提供一定的生活支持。</p>
                                </div>
                            </div>

                        </div></a></li>
                        <li><a href="#"><div class="flip_div">

                            <div class="grid_box">
                                <div class="section1">
                                    <h1>自杀风险7级</h1>
                                </div>
                                <div class="section2">
                                    <p class="Metadata">今天 4:57 四川</p>
                                </div>
                                <div class="section3">
                                    <p class="Metadata">https://weibo.com/9253447442</p>
                                </div>
                                <div class="section4">
                                    <h2>情绪危机文本：</h2>
                                    <p>昨天喝完酒割腕了。谈了一场短暂的恋爱，又是被绿了。感觉自己啊 真的失败。连死都死不成，我还能干成什么。每天头发成把的掉。每天都在失眠。 我真的快撑不下去了</p>
                                </div>
                                <div class="section5">
                                    <h2>模型分析结果:</h2>
                                    <p>经分析，该用户可能具有<span>哀伤与丧失，情绪化推理</span>的主要危机情绪特征。</p>
                                    <p><span>哀伤与丧失：</span>丧失是指失去亲近的人，可能是死亡或者是离开；失去未来的各种可能性,以及身体的损害等。生活中可能存在的丧失包括离婚、丧失配偶、丧失亲人、失去友谊等。<p>
                                    <p><span>情绪化推理：</span>把情绪当成了事实的依据，你认为只要有负面情绪，就足以证明事实确实非常糟糕，因为你这样想：“我感觉得出来，所以肯定就是真的”。</p>
                                    <p><span>特别提醒：</span>该微博用户曾经有大量发言(留言>1000)之嫌疑。</p>
                                </div>
                            </div>

                        </div></a></li>

                    </ul>
                    <!--
                    <ol  class="flip_bar">
                        小按钮数量无法确定，由js动态生成
                    </ol>-->
                    <!--左右焦点-->
                    <div id="arr">
                          <span id="left"> <</span>
                          <span id="right">></span>
                    </div>

                </div>
            </div>
       </li>

        <!--        第3栏-->
        <!--        注意：这3个图表的高度不一致，但是总高度加起来和左边是一样的-->
        <li>
            <div class="boxall" style="height:3.8rem" id="chart4">
                <div class="alltitle">{{form.echart4.title}}</div>
                <div class="allnav" id="echart4"></div>
                <div class="boxfoot"></div>
            </div>
            <!--<div class="boxall" style="height: 3.2rem">
                <div class="alltitle">{{form.echart5.title}}</div>
                <div class="allnav" id="echart5"></div>
                <div class="boxfoot"></div>
            </div>-->
            <div class="boxall" style="height: 6rem" id="chart6">
                <div class="alltitle">{{form.echart6.title}}</div>
                <div class="allnav" id="echart6"></div>
                <div class="boxfoot"></div>
            </div>
            <div class="boxall" style="height: 0rem;opacity:0" id="chart7">
                <div class="alltitle">{{form.echart7.title}}</div>
                <div class="allnav" id="echart7"></div>
                <div class="boxfoot"></div>
            </div>
        </li>

    </ul>
</div>
<div class="back"></div>

<!--echart1-->
<!--<script type="text/javascript" src="../static/js/echarts_1.js"></script>-->
<script>
$(function echarts_1() {
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('echart1'));

    option = {
    //backgroundColor: '#00265f',     // 这个背景颜色是不透明的
    toolbox: {
          feature: {
            //saveAsImage: { show: false }, // 导出图片
            myFull: { // 全屏
              show: true,
              title: '全屏',
              icon: 'image://static/images/fullscreen.png',
              onclick: (e) => {
                    // 注：yourEchartsId: 你的图表id
                    var element = document.getElementById("chart8");
                    element.style.height="7.2rem";
                    element.style.width="10rem";
                    if (element.requestFullScreen) { // HTML W3C 提议
                        element.requestFullScreen();
                    } else if (element.msRequestFullscreen) { // IE11
                        element.msRequestFullScreen();
                    } else if (element.webkitRequestFullScreen) { // Webkit (works in Safari5.1 and Chrome 15)
                        element.webkitRequestFullScreen();
                    } else if (element.mozRequestFullScreen) { // Firefox (works in nightly)
                        element.mozRequestFullScreen();
                    }
                    // 退出全屏
                    if (element.requestFullScreen) {
                        document.exitFullscreen();
                    } else if (element.msRequestFullScreen) {
                        document.msExitFullscreen();
                    } else if (element.webkitRequestFullScreen) {
                        document.webkitCancelFullScreen();
                    } else if (element.mozRequestFullScreen) {
                        document.mozCancelFullScreen();
                    }
                    window.addEventListener('resize', function () {
                    // 让我们的图表调用 resize这个方法
                    myChart.resize();});
              },
            }
          }
      },
    tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'shadow'
        }
    },
    grid: {         
        left: '0%',
        top: '0%',
		//top:'10px',
        right: '0%',
        bottom: '4%',
        containLabel: true   // 表示坐标轴label标签也是grid图表的一部分
    },
    xAxis: [{
        type: 'category',
        data: {{form.echart1.xAxis|safe}},
        axisLine: {
            show: true,
            lineStyle: {
                color: "rgba(255,255,255,.1)",
                width: 1,
                type: "solid"
            },
        },
        axisTick: { show: false,},
		axisLabel:  {
                interval: 0,
                rotate:50,
                show: true,
                splitNumber: 15,
                textStyle: {
 					color: "rgba(255,255,255,.6)",
                    fontSize: '12',},
                },}],

    yAxis: [{
        type: 'value',
        axisLabel: {
       //formatter: '{value} %'
        show:true,
         textStyle: {
                color: "rgba(255,255,255,.6)",
                fontSize: '12',
                },
        },
        axisTick: {
            show: false,
        },
        axisLine: {
            show: true,
            lineStyle: {
                color: "rgba(255,255,255,.1	)",
                width: 1,
                type: "solid"
            },
        },
        splitLine: {
            lineStyle: {
               color: "rgba(255,255,255,.1)",
            }
        }
    }],
    series: [
		{
        type: 'bar',
        data: {{form.echart1.series|safe}},
        barWidth:'35%', //柱子宽度
       // barGap: 1, //柱子之间间距
        itemStyle: {
            normal: {
                color:'#2f89cf',
                opacity: 1,
				barBorderRadius: 5,
            }
        }
    }

	]
};

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        window.addEventListener("resize",function(){
            myChart.resize();
        });
    })

</script>


<!--echart2-->
<script>
  $(function echarts_2() {
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('echart2'));

       option = {
  //  backgroundColor: '#00265f',
      toolbox: {
          feature: {
            //saveAsImage: { show: false }, // 导出图片
            myFull: { // 全屏
              show: true,
              title: '全屏',
              icon: 'image://static/images/fullscreen.png',
              onclick: (e) => {
                    // 注：yourEchartsId: 你的图表id
                    const element = document.getElementById("chart2");
                    if (element.requestFullScreen) { // HTML W3C 提议
                        element.requestFullScreen();
                    } else if (element.msRequestFullscreen) { // IE11
                        element.msRequestFullScreen();
                    } else if (element.webkitRequestFullScreen) { // Webkit (works in Safari5.1 and Chrome 15)
                        element.webkitRequestFullScreen();
                    } else if (element.mozRequestFullScreen) { // Firefox (works in nightly)
                        element.mozRequestFullScreen();
                    }
                    // 退出全屏
                    if (element.requestFullScreen) {
                        document.exitFullscreen();
                    } else if (element.msRequestFullScreen) {
                        document.msExitFullscreen();
                    } else if (element.webkitRequestFullScreen) {
                        document.webkitCancelFullScreen();
                    } else if (element.mozRequestFullScreen) {
                        document.mozCancelFullScreen();
                    }
                    window.addEventListener('resize', function () {
                    // 让我们的图表调用 resize这个方法
                    myChart.resize();});
              },
            }
          }
      },
    tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'shadow'}
    },
    grid: {
        left: '0%',
		top:'10px',
        right: '0%',
        bottom: '4%',
       containLabel: true
    },
    xAxis: [{
        type: 'category',
      		data: {{form.echart2.xAxis|safe}},
        axisLine: {
            show: true,
         lineStyle: {
                color: "rgba(255,255,255,.1)",
                width: 1,
                type: "solid"
            },
        },

        axisTick: {
            show: false,
        },
		axisLabel:  {
                interval: 0,
               // rotate:50,
                show: true,
                splitNumber: 15,
                textStyle: {
 					color: "rgba(255,255,255,.6)",
                    fontSize: '12',
                },
            },
    }],
    yAxis: [{
        type: 'value',
        axisLabel: {
           //formatter: '{value} %'
			show:true,
			 textStyle: {
 					color: "rgba(255,255,255,.6)",
                    fontSize: '12',
                },
        },
        axisTick: {
            show: false,
        },
        axisLine: {
            show: true,
            lineStyle: {
                color: "rgba(255,255,255,.1	)",
                width: 1,
                type: "solid"
            },
        },
        splitLine: {
            lineStyle: {
               color: "rgba(255,255,255,.1)",
            }
        }
    }],
    series: [
		{

        type: 'bar',
        data: {{form.echart2.series|safe}},
        barWidth:'35%', //柱子宽度
       // barGap: 1, //柱子之间间距
        itemStyle: {
        normal: {
            //color:'#27d08a',
            color: function (params){
                        var colorList = ['rgb(255, 153, 51)','rgb(255, 80, 80)','rgb(225, 0, 0)','rgb(0, 255, 255)','rgb(51, 204, 255)','rgb(51, 153, 255)'];
                        return colorList[params.dataIndex];
                    },
            opacity: 1,
            barBorderRadius: 5,
        }
    }
    }

	]
};

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        window.addEventListener("resize",function(){
            myChart.resize();
        });
    })








</script>
<!--echarts3_1-->
<script>
$(function echarts_31() {
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('fb1'));
    option = {
	    title: [{
        text: '{{form.echarts3_1.title}}',
        left: 'center',
        textStyle: {
            color: '#fff',
			fontSize:'16'
        }
    }],
    tooltip: {                                  // 鼠标放上去之后浮标的设置选项
        trigger: 'item',
        formatter: "{a} <br/>{b}: {c} ({d}%)",  // 标题，内容：数值%
        position:function(p){                   //其中p为当前鼠标的位置
        return [p[0] + 10, p[1] - 10];          // 横坐标往上，纵坐标往右，便于观看
        }
    },
    legend: {
        top:'70%',
        itemWidth: 10,
        itemHeight: 10,
        data:{{form.echarts3_1.xAxis|safe}},
        textStyle: {
            color: 'rgba(255,255,255,.5)',
            fontSize:'12',
        }
    },
    series: [
        {
        	name:'{{form.echarts3_1.title}}',
            type:'pie',
			center: ['50%', '42%'],
            radius: ['40%', '60%'],
                  color: ['#063aab', '#065aab', '#0682ab', '#06a0bb', '#06a9ab','#06b4ab','#06c8ab','#06dfab','#06ffab'],
            label: {show:false},
			labelLine: {show:false},
            data:{{form.echarts3_1.data|safe}}
        }
    ]
};
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
    window.addEventListener("resize",function(){
        myChart.resize();
    });
})



</script>
<!--echarts3_2-->
<script>
$(function echarts_32() {
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('fb2'));
    option = {
	    title: [{
        text: '{{form.echarts3_2.title}}',
        left: 'center',
        textStyle: {
            color: '#fff',
			fontSize:'16'
        }

    }],
    toolbox: {
          feature: {
            //saveAsImage: { show: false }, // 导出图片
            myFull: { // 全屏
              show: true,
              title: '全屏',
              icon: 'image://static/images/fullscreen.png',
              onclick: (e) => {
                    // 注：yourEchartsId: 你的图表id
                    const element = document.getElementById("chart3");
                    if (element.requestFullScreen) { // HTML W3C 提议
                        element.requestFullScreen();
                    } else if (element.msRequestFullscreen) { // IE11
                        element.msRequestFullScreen();
                    } else if (element.webkitRequestFullScreen) { // Webkit (works in Safari5.1 and Chrome 15)
                        element.webkitRequestFullScreen();
                    } else if (element.mozRequestFullScreen) { // Firefox (works in nightly)
                        element.mozRequestFullScreen();
                    }
                    // 退出全屏
                    if (element.requestFullScreen) {
                        document.exitFullscreen();
                    } else if (element.msRequestFullScreen) {
                        document.msExitFullscreen();
                    } else if (element.webkitRequestFullScreen) {
                        document.webkitCancelFullScreen();
                    } else if (element.mozRequestFullScreen) {
                        document.mozCancelFullScreen();
                    }
                    window.addEventListener('resize', function () {
                    // 让我们的图表调用 resize这个方法
                    myChart.resize();});
              },
            }
          }
      },
    tooltip: {
        trigger: 'item',
        formatter: "{a} <br/>{b}: {c} ({d}%)",
        position:function(p){   //其中p为当前鼠标的位置
            return [p[0] + 10, p[1] - 10];
        }
    },
    legend: {
        top:'70%',
        itemWidth: 10,
        itemHeight: 10,
        data:{{form.echarts3_2.xAxis|safe}},
        textStyle: {
        color: 'rgba(255,255,255,.5)',
		fontSize:'12',
        }
    },
    series: [
        {
        	name:'{{form.echarts3_2.title}}',   // 这个标题是tooltip上显示的标题
            type:'pie',
			center: ['50%', '42%'],
            radius: ['40%', '60%'],
            color: ['#065aab', '#066eab', '#0682ab', '#0696ab', '#06a0ab','#06b4ab','#06c8ab','#06dcab','#06f0ab'],
            label: {show:false},
			labelLine: {show:false},
            data:{{form.echarts3_2.data|safe}}
        }
    ]
};

// 使用刚指定的配置项和数据显示图表。
myChart.setOption(option);
window.addEventListener("resize",function(){
    myChart.resize();
});
})



</script>

<!--echarts4-->
<script>
$(function echarts_4() {
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('echart4'));
    option = {
	    tooltip: {
        trigger: 'axis',
        axisPointer: {
            lineStyle: {
                color: '#dddc6b'
            }
        }
    },
    toolbox: {
          feature: {
            //saveAsImage: { show: false }, // 导出图片
            myFull: { // 全屏
              show: true,
              title: '全屏',
              icon: 'image://static/images/fullscreen.png',
              onclick: (e) => {
                    // 注：yourEchartsId: 你的图表id
                    const element = document.getElementById("chart4");
                    if (element.requestFullScreen) { // HTML W3C 提议
                        element.requestFullScreen();
                    } else if (element.msRequestFullscreen) { // IE11
                        element.msRequestFullScreen();
                    } else if (element.webkitRequestFullScreen) { // Webkit (works in Safari5.1 and Chrome 15)
                        element.webkitRequestFullScreen();
                    } else if (element.mozRequestFullScreen) { // Firefox (works in nightly)
                        element.mozRequestFullScreen();
                    }
                    // 退出全屏
                    if (element.requestFullScreen) {
                        document.exitFullscreen();
                    } else if (element.msRequestFullScreen) {
                        document.msExitFullscreen();
                    } else if (element.webkitRequestFullScreen) {
                        document.webkitCancelFullScreen();
                    } else if (element.mozRequestFullScreen) {
                        document.mozCancelFullScreen();
                    }
                    window.addEventListener('resize', function () {
                    // 让我们的图表调用 resize这个方法
                    myChart.resize();});
              },
            }
          }
      },
	legend: {
        top:'0%',
        data:{{form.echart4.names|safe}},
        textStyle: {
            color: 'rgba(255,255,255,.5)',
            fontSize:'12',
        }
    },
    grid: {
        left: '10',
		top: '30',
        right: '10',
        bottom: '10',
        containLabel: true  // 包含坐标轴的图例
    },
    xAxis: [{
        type: 'category',
        boundaryGap: false,
        axisLabel:  {
            textStyle: {
                color: "rgba(255,255,255,.6)",
                fontSize:12,
                },
            },
        axisLine: {
			lineStyle: {
				color: 'rgba(255,255,255,.2)'
			    }
            },
        data: {{form.echart4.xAxis|safe}}
        },
        {
        axisPointer: {show: false},
        axisLine: {show: false},
        position: 'bottom',
        offset: 20,
    }],
    yAxis: [{
        type: 'value',
        axisTick: {show: false},
        axisLine: {
            lineStyle: {
                color: 'rgba(255,255,255,.1)'
            }
        },
        axisLabel:  {
            textStyle: {
                color: "rgba(255,255,255,.6)",
                fontSize:12,
            },
        },
        splitLine: {
            lineStyle: {
                 color: 'rgba(255,255,255,.1)'
            }
        }
    }],
    series: [
	{
        name: '{{form.echart4.data[0].name}}',
        data: {{form.echart4.data[0].value|safe}},
        type: 'line',
        smooth: true,
        symbol: 'circle',
        symbolSize: 5,
        showSymbol: false,
        lineStyle: {
            normal: {
				color: '#0184d5',
                width: 2
            }
        },
        areaStyle: {
            normal: {
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                    offset: 0,
                    color: 'rgba(1, 132, 213, 0.4)'
                }, {
                    offset: 0.8,
                    color: 'rgba(1, 132, 213, 0.1)'
                }], false),
                shadowColor: 'rgba(0, 0, 0, 0.1)',
            }
        },
			itemStyle: {
			normal: {
				color: '#0184d5',
				borderColor: 'rgba(221, 220, 107, .1)',
				borderWidth: 12
			}
		},
    },

]
};
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
    window.addEventListener("resize",function(){
        myChart.resize();
    });
})


</script>

<!--echarts6-->
<script>
$(function echarts_6() {
            var chart = echarts.init(document.getElementById('echart6'));
            var option = {
                tooltip: {},
                toolbox: {
          feature: {
            //saveAsImage: { show: false }, // 导出图片
            myFull: { // 全屏
              show: true,
              title: '全屏',
              icon: 'image://static/images/fullscreen.png',
              onclick: (e) => {
                    // 注：yourEchartsId: 你的图表id
                    var element = document.getElementById("chart7");
                    element.style.height="3.2rem";
                    element.style.opacity="1";
                    if (element.requestFullScreen) { // HTML W3C 提议
                        element.requestFullScreen();
                    } else if (element.msRequestFullscreen) { // IE11
                        element.msRequestFullScreen();
                    } else if (element.webkitRequestFullScreen) { // Webkit (works in Safari5.1 and Chrome 15)
                        element.webkitRequestFullScreen();
                    } else if (element.mozRequestFullScreen) { // Firefox (works in nightly)
                        element.mozRequestFullScreen();
                    }
                    // 退出全屏
                    if (element.requestFullScreen) {
                        document.exitFullscreen();
                    } else if (element.msRequestFullScreen) {
                        document.msExitFullscreen();
                    } else if (element.webkitRequestFullScreen) {
                        document.webkitCancelFullScreen();
                    } else if (element.mozRequestFullScreen) {
                        document.mozCancelFullScreen();
                    }
                    window.addEventListener('resize', function () {
                    // 让我们的图表调用 resize这个方法
                    myChart.resize();});
              },
            }
          }
      },
                series: [ {
                    type: 'wordCloud',
                    gridSize: 2,
                    sizeRange: [20, 50],
                    rotationRange: [-90,90],
                    shape: 'rectangle',
                    width: 900,
                    height: 1100,
                    drawOutOfBound: true,
                    textStyle: {
                        normal: {
                            color: function () {
                                return 'rgb(' + [
                                    Math.round(Math.random() * 160),
                                    Math.round(Math.random() * 160),
                                    Math.round(Math.random() * 160)
                                ].join(',') + ')';
                            }
                        },
                        emphasis: {
                            shadowBlur: 10,
                            shadowColor: '#333'
                        }
                    },
                    data: {{form.echart6.data|safe}}
                } ]
            };

            chart.setOption(option);

            window.onresize = chart.resize;
            })
</script>

<!--file-->
<script>
    /**
     *
     * @param id  传入元素的id
     * @returns {HTMLElement | null}  返回标签对象，方便获取元素
     */
    function my$(id) {
        return document.getElementById(id);
    }

    //获取各元素，方便操作
    var box=my$("flipbox");
    var inner=box.children[0];
    var ulObj=inner.children[0];
    var list=ulObj.children;
    var olObj=inner.children[1];
    var arr=my$("arr");
    var imgWidth=inner.offsetWidth;
    var right=my$("right");
    var pic=0;
    //根据li个数，创建小按钮
    for(var i=0;i<list.length;i++){
        var liObj=document.createElement("li");

        olObj.appendChild(liObj);
        liObj.innerText=(i+1);
        liObj.setAttribute("index",i);

        //为按钮注册mouseover事件
        liObj.onmouseover=function () {
            //先清除所有按钮的样式

            for (var j=0;j<olObj.children.length;j++){
                olObj.children[j].removeAttribute("class");
            }
            this.className="current";
            pic=this.getAttribute("index");
            animate(ulObj,-pic*imgWidth);
        }

    }


    //设置ol中第一个li有背景颜色
    olObj.children[0].className = "current";
    //克隆一个ul中第一个li,加入到ul中的最后=====克隆
    ulObj.appendChild(ulObj.children[0].cloneNode(true));

    var timeId=setInterval(onmouseclickHandle,10000);
    //左右焦点实现点击切换图片功能
    box.onmouseover=function () {
        arr.style.display="block";
        clearInterval(timeId);
    };
    box.onmouseout=function () {
        arr.style.display="none";
        timeId=setInterval(onmouseclickHandle,10000);
    };

    right.onclick=onmouseclickHandle;
    function onmouseclickHandle() {
        //如果pic的值是5,恰巧是ul中li的个数-1的值,此时页面显示第六个图片,而用户会认为这是第一个图,
        //所以,如果用户再次点击按钮,用户应该看到第二个图片
        if (pic == list.length - 1) {
            //如何从第6个图,跳转到第一个图
            pic = 0;//先设置pic=0
            ulObj.style.left = 0 + "px";//把ul的位置还原成开始的默认位置
        }
        pic++;//立刻设置pic加1,那么此时用户就会看到第二个图片了
        animate(ulObj, -pic * imgWidth);//pic从0的值加1之后,pic的值是1,然后ul移动出去一个图片
        //如果pic==5说明,此时显示第6个图(内容是第一张图片),第一个小按钮有颜色,
        if (pic == list.length - 1) {
            //第五个按钮颜色干掉
            olObj.children[olObj.children.length - 1].className = "";
            //第一个按钮颜色设置上
            olObj.children[0].className = "current";
        } else {
            //干掉所有的小按钮的背景颜色
            for (var i = 0; i < olObj.children.length; i++) {
                olObj.children[i].removeAttribute("class");
            }
            olObj.children[pic].className = "current";
        }
    }
    left.onclick=function () {
        if (pic==0){
            pic=list.length-1;
            ulObj.style.left=-pic*imgWidth+"px";
        }
        pic--;
        animate(ulObj,-pic*imgWidth);
        for (var i = 0; i < olObj.children.length; i++) {
            olObj.children[i].removeAttribute("class");
        }
        //当前的pic索引对应的按钮设置颜色
        olObj.children[pic].className = "current";
    };

    //设置任意的一个元素,移动到指定的目标位置
    function animate(element, target) {
        clearInterval(element.timeId);
        //定时器的id值存储到对象的一个属性中
        element.timeId = setInterval(function () {
            //获取元素的当前的位置,数字类型
            var current = element.offsetLeft;
            //每次移动的距离
            var step = 10;
            step = current < target ? step : -step;
            //当前移动到位置
            current += step;
            if (Math.abs(current - target) > Math.abs(step)) {
                element.style.left = current + "px";
            } else {
                //清理定时器
                clearInterval(element.timeId);
                //直接到达目标
                element.style.left = target + "px";
            }
        }, 10);
    }
</script>

<!--echart7-->
<script>
$(function echarts_7() {
            var chart = echarts.init(document.getElementById('echart7'));
            var option = {
                tooltip: {},
                toolbox: {
          feature: {
            //saveAsImage: { show: false }, // 导出图片
            myFull: { // 全屏
              show: true,
              title: '全屏',
              icon: 'image://static/images/fullscreen.png',
              onclick: (e) => {
                    // 注：yourEchartsId: 你的图表id
                    var element = document.getElementById("chart7");
                    element.style.height="0rem";
                    element.style.opacity="0";
                    if (element.requestFullScreen) { // HTML W3C 提议
                        element.requestFullScreen();
                    } else if (element.msRequestFullscreen) { // IE11
                        element.msRequestFullScreen();
                    } else if (element.webkitRequestFullScreen) { // Webkit (works in Safari5.1 and Chrome 15)
                        element.webkitRequestFullScreen();
                    } else if (element.mozRequestFullScreen) { // Firefox (works in nightly)
                        element.mozRequestFullScreen();
                    }
                    // 退出全屏
                    if (element.requestFullScreen) {
                        document.exitFullscreen();
                    } else if (element.msRequestFullScreen) {
                        document.msExitFullscreen();
                    } else if (element.webkitRequestFullScreen) {
                        document.webkitCancelFullScreen();
                    } else if (element.mozRequestFullScreen) {
                        document.mozCancelFullScreen();
                    }
                    window.addEventListener('resize', function () {
                    // 让我们的图表调用 resize这个方法
                    myChart.resize();});
              },
            }
          }
      },
                series: [ {
                    type: 'wordCloud',
                    gridSize: 2,
                    sizeRange: [35, 95],
                    rotationRange: [-90,90],
                    shape: 'rectangle',
                    width: 6000,
                    height: 3600,
                    drawOutOfBound: true,
                    textStyle: {
                        normal: {
                            color: function () {
                                return 'rgb(' + [
                                    Math.round(Math.random() * 160),
                                    Math.round(Math.random() * 160),
                                    Math.round(Math.random() * 160)
                                ].join(',') + ')';
                            }
                        },
                        emphasis: {
                            shadowBlur: 10,
                            shadowColor: '#333'
                        }
                    },
                    data: {{form.echart7.data|safe}}
                } ]
            };

            chart.setOption(option);

            window.onresize = chart.resize;
            })
</script>

<!--map_1-->
<script>
    $(function map() {
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('map_1'));
var data = {{form.map_1.data|safe}};
var geoCoordMap = {
    '海门':[121.15,31.89],
    '鄂尔多斯':[109.781327,39.608266],
    '招远':[120.38,37.35],
    '舟山':[122.207216,29.985295],
    '齐齐哈尔':[123.97,47.33],
    '盐城':[120.13,33.38],
    '赤峰':[118.87,42.28],
    '青岛':[120.33,36.07],
    '乳山':[121.52,36.89],
    '金昌':[102.188043,38.520089],
    '泉州':[118.58,24.93],
    '莱西':[120.53,36.86],
    '日照':[119.46,35.42],
    '胶南':[119.97,35.88],
    '南通':[121.05,32.08],
    '拉萨':[91.11,29.97],
    '云浮':[112.02,22.93],
    '梅州':[116.1,24.55],
    '文登':[122.05,37.2],
    '上海':[121.48,31.22],
    '攀枝花':[101.718637,26.582347],
    '威海':[122.1,37.5],
    '承德':[117.93,40.97],
    '厦门':[118.1,24.46],
    '汕尾':[115.375279,22.786211],
    '潮州':[116.63,23.68],
    '丹东':[124.37,40.13],
    '太仓':[121.1,31.45],
    '曲靖':[103.79,25.51],
    '烟台':[121.39,37.52],
    '福州':[119.3,26.08],
    '瓦房店':[121.979603,39.627114],
    '即墨':[120.45,36.38],
    '抚顺':[123.97,41.97],
    '玉溪':[102.52,24.35],
    '张家口':[114.87,40.82],
    '阳泉':[113.57,37.85],
    '莱州':[119.942327,37.177017],
    '湖州':[120.1,30.86],
    '汕头':[116.69,23.39],
    '昆山':[120.95,31.39],
    '宁波':[121.56,29.86],
    '湛江':[110.359377,21.270708],
    '揭阳':[116.35,23.55],
    '荣成':[122.41,37.16],
    '连云港':[119.16,34.59],
    '葫芦岛':[120.836932,40.711052],
    '常熟':[120.74,31.64],
    '东莞':[113.75,23.04],
    '河源':[114.68,23.73],
    '淮安':[119.15,33.5],
    '泰州':[119.9,32.49],
    '南宁':[108.33,22.84],
    '营口':[122.18,40.65],
    '惠州':[114.4,23.09],
    '江阴':[120.26,31.91],
    '蓬莱':[120.75,37.8],
    '韶关':[113.62,24.84],
    '嘉峪关':[98.289152,39.77313],
    '广州':[113.23,23.16],
    '延安':[109.47,36.6],
    '太原':[112.53,37.87],
    '清远':[113.01,23.7],
    '中山':[113.38,22.52],
    '昆明':[102.73,25.04],
    '寿光':[118.73,36.86],
    '盘锦':[122.070714,41.119997],
    '长治':[113.08,36.18],
    '深圳':[114.07,22.62],
    '珠海':[113.52,22.3],
    '宿迁':[118.3,33.96],
    '咸阳':[108.72,34.36],
    '铜川':[109.11,35.09],
    '平度':[119.97,36.77],
    '佛山':[113.11,23.05],
    '海口':[110.35,20.02],
    '江门':[113.06,22.61],
    '章丘':[117.53,36.72],
    '肇庆':[112.44,23.05],
    '大连':[121.62,38.92],
    '临汾':[111.5,36.08],
    '吴江':[120.63,31.16],
    '石嘴山':[106.39,39.04],
    '沈阳':[123.38,41.8],
    '苏州':[120.62,31.32],
    '茂名':[110.88,21.68],
    '嘉兴':[120.76,30.77],
    '长春':[125.35,43.88],
    '胶州':[120.03336,36.264622],
    '银川':[106.27,38.47],
    '张家港':[120.555821,31.875428],
    '三门峡':[111.19,34.76],
    '锦州':[121.15,41.13],
    '南昌':[115.89,28.68],
    '柳州':[109.4,24.33],
    '三亚':[109.511909,18.252847],
    '自贡':[104.778442,29.33903],
    '吉林':[126.57,43.87],
    '阳江':[111.95,21.85],
    '泸州':[105.39,28.91],
    '西宁':[101.74,36.56],
    '宜宾':[104.56,29.77],
    '呼和浩特':[111.65,40.82],
    '成都':[104.06,30.67],
    '大同':[113.3,40.12],
    '镇江':[119.44,32.2],
    '桂林':[110.28,25.29],
    '张家界':[110.479191,29.117096],
    '宜兴':[119.82,31.36],
    '北海':[109.12,21.49],
    '西安':[108.95,34.27],
    '金坛':[119.56,31.74],
    '东营':[118.49,37.46],
    '牡丹江':[129.58,44.6],
    '遵义':[106.9,27.7],
    '绍兴':[120.58,30.01],
    '扬州':[119.42,32.39],
    '常州':[119.95,31.79],
    '潍坊':[119.1,36.62],
    '重庆':[106.54,29.59],
    '台州':[121.420757,28.656386],
    '南京':[118.78,32.04],
    '滨州':[118.03,37.36],
    '贵阳':[106.71,26.57],
    '无锡':[120.29,31.59],
    '本溪':[123.73,41.3],
    '克拉玛依':[84.77,45.59],
    '渭南':[109.5,34.52],
    '马鞍山':[118.48,31.56],
    '宝鸡':[107.15,34.38],
    '焦作':[113.21,35.24],
    '句容':[119.16,31.95],
    '北京':[116.46,39.92],
    '徐州':[117.2,34.26],
    '衡水':[115.72,37.72],
    '包头':[110,40.58],
    '绵阳':[104.73,31.48],
    '乌鲁木齐':[87.68,43.77],
    '枣庄':[117.57,34.86],
    '杭州':[120.19,30.26],
    '淄博':[118.05,36.78],
    '鞍山':[122.85,41.12],
    '溧阳':[119.48,31.43],
    '库尔勒':[86.06,41.68],
    '安阳':[114.35,36.1],
    '开封':[114.35,34.79],
    '济南':[117,36.65],
    '德阳':[104.37,31.13],
    '温州':[120.65,28.01],
    '九江':[115.97,29.71],
    '邯郸':[114.47,36.6],
    '临安':[119.72,30.23],
    '兰州':[103.73,36.03],
    '沧州':[116.83,38.33],
    '临沂':[118.35,35.05],
    '南充':[106.110698,30.837793],
    '天津':[117.2,39.13],
    '富阳':[119.95,30.07],
    '泰安':[117.13,36.18],
    '诸暨':[120.23,29.71],
    '郑州':[113.65,34.76],
    '哈尔滨':[126.63,45.75],
    '聊城':[115.97,36.45],
    '芜湖':[118.38,31.33],
    '唐山':[118.02,39.63],
    '平顶山':[113.29,33.75],
    '邢台':[114.48,37.05],
    '德州':[116.29,37.45],
    '济宁':[116.59,35.38],
    '荆州':[112.239741,30.335165],
    '宜昌':[111.3,30.7],
    '义乌':[120.06,29.32],
    '丽水':[119.92,28.45],
    '洛阳':[112.44,34.7],
    '秦皇岛':[119.57,39.95],
    '株洲':[113.16,27.83],
    '石家庄':[114.48,38.03],
    '莱芜':[117.67,36.19],
    '常德':[111.69,29.05],
    '保定':[115.48,38.85],
    '湘潭':[112.91,27.87],
    '金华':[119.64,29.12],
    '岳阳':[113.09,29.37],
    '长沙':[113,28.21],
    '衢州':[118.88,28.97],
    '廊坊':[116.7,39.53],
    '菏泽':[115.480656,35.23375],
    '合肥':[117.27,31.86],
    '武汉':[114.31,30.52],
    '大庆':[125.03,46.58]
};
var convertData = function (data) {
    var res = [];
    for (var i = 0; i < data.length; i++) {
        var geoCoord = geoCoordMap[data[i].name];
        if (geoCoord) {
            res.push({
                name: data[i].name,
                value: geoCoord.concat(data[i].value)
            });
        }
    }
    return res;
};
option = {

    tooltip : {
        trigger: 'item',
		formatter: function (params) {
              if(typeof(params.value)[2] == "undefined"){
              	return params.name + ' : ' + params.value;
              }else{
              	return params.name + ' : ' + params.value[2];
              }
            }
    },

    toolbox: {
          feature: {
            //saveAsImage: { show: false }, // 导出图片
            myFull: { // 全屏
              show: true,
              title: '全屏',
              icon: 'image://static/images/fullscreen.png',
              onclick: (e) => {
                    // 注：yourEchartsId: 你的图表id
                    var element = document.getElementById("chart8");
                    element.style.height="0rem";
                    element.style.width="0rem";
                    if (element.requestFullScreen) { // HTML W3C 提议
                        element.requestFullScreen();
                    } else if (element.msRequestFullscreen) { // IE11
                        element.msRequestFullScreen();
                    } else if (element.webkitRequestFullScreen) { // Webkit (works in Safari5.1 and Chrome 15)
                        element.webkitRequestFullScreen();
                    } else if (element.mozRequestFullScreen) { // Firefox (works in nightly)
                        element.mozRequestFullScreen();
                    }
                    // 退出全屏
                    if (element.requestFullScreen) {
                        document.exitFullscreen();
                    } else if (element.msRequestFullScreen) {
                        document.msExitFullscreen();
                    } else if (element.webkitRequestFullScreen) {
                        document.webkitCancelFullScreen();
                    } else if (element.mozRequestFullScreen) {
                        document.mozCancelFullScreen();
                    }
                    window.addEventListener('resize', function () {
                    // 让我们的图表调用 resize这个方法
                    myChart.resize();});
              },
            }
          },

      },

    geo: {
        map: 'china',
        label: {
            emphasis: {
                show: false
            }
        },
        roam: false,//禁止其放大缩小
        itemStyle: {
            normal: {
                areaColor: '#4c60ff',
                borderColor: '#002097'
            },
            emphasis: {
                areaColor: '#293fff'
            }
        }
    },
    series : [
        {
            name: '消费金额',
            type: 'scatter',
            coordinateSystem: 'geo',
            data: convertData(data),
            symbolSize: function (val) {
                return val[2] / {{form.map_1.symbolSize}};
            },
            label: {
                normal: {
                    formatter: '{b}',
                    position: 'right',
                    show: false
                },
                emphasis: {
                    show: true
                }
            },
            itemStyle: {
                normal: {
                    color: '#ffeb7b'
                }
            }
        }
    ]
};

        myChart.setOption(option);
        window.addEventListener("resize",function(){
            myChart.resize();
        });
    }
)





</script>


</body>
</html>
